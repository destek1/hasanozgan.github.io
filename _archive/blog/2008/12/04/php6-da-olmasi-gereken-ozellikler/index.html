
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PHP 6'da Olması Gereken Özellikler</title>
    
    <meta name="author" content="Hasan Ozgan">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/heves/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="/assets/themes/heves/css/docs.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/heves/js/google-code-prettify/prettify.css" rel="stylesheet">
    <link href="/assets/themes/heves/css/followbox.css" rel="stylesheet" type="text/css"/>

    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
</head>

<body>

<div class="navbar navbar-fixed-top">
<a href="http://www.reactivemanifesto.org/"><img style="border: 0; position: fixed; right: 0; top:41px; z-index: 9000" src="http://www.reactivemanifesto.org/images/ribbons/we-are-reactive-red-right.png"></a> 
    <div class="navbar-inner">
        <div class="container" style="width:1200px">
           <a class="brand" href="/">Internet Stratejileri, Yazılım Geliştirme ve Mimarileri Üzerine</a>

            <div class="nav-collapse">
                <ul class="nav">
                    <li>
                        <a href="/"><i class="icon-home"></i> Anasayfa</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-briefcase"></i> Belgeler <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        	<li><a href="/blog/2013/03/30/fonksiyonel-programlama/" target="_blank">Fonksiyonel Programlama</a></li>
                            <li><a href="/belgeler/scala-rehberi" rel="tooltip" title="Scala Rehberi" target="_blank">Scala Rehberi</a></li>
                            <li><a href="/belgeler/tasarim-desenleri" rel="tooltip" title="Tasarım Desenleri" target="_blank">Tasarım Desenleri</a></li>
                            <li><a href="/belgeler/tasarim-prensipleri" rel="tooltip" title="Tasarım Prensipleri" target="_blank">Tasarım Prensipleri</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="https://github.com/HasanOzgan"><i class="icon-globe"></i> Projeler</a>
                    </li>
                    <li><a href="/archive"><i class="icon-folder-open"></i> Arşiv</a></li>
                    <li>
                        <a href="/hakkinda"><i class="icon-user"></i> Hakkımda</a>
                    </li>
                    
                </ul>
            </div>

        </div>
    </div>
</div>

<div class="container">
    <div class="marketing">
        <div class="content">
            


<div class="row">
    <div class="span12 column">
        <p></p><h1>PHP 6'da Olması Gereken Özellikler</h1><p></p>
    </div>
</div>

<div class="row">
    <div class="span8 column">
        <!--<h5><strong>Aralık 04, 2008 <small> | <a href="/blog/2008/12/04/php6-da-olmasi-gereken-ozellikler#disqus_thread" data-disqus-identifier="/blog/2008/12/04/php6-da-olmasi-gereken-ozellikler">Yorumlar</a></small></strong><br>-->

        
            <i class="icon-tags"></i> Etiketler :
            
                <a href="tag/Diğer" rel="tooltip" title="View posts tagged with &quot;Diğer&quot;"><span class="label label-info">Diğer</span></a>
            
        


    </div>
    <div class="span4 column">
        <p class="pull-right">
            
            <a href="/blog/2008/11/30/web-uygulama-gelistiricileri-icin-firefox-eklentileri" title="Web Geliştiricileri İçin Firefox Eklentileri"><i class="icon-chevron-left"></i></a>
            
            
            <a href="/blog/2009/03/01/yazilim-gelistiricisinin-serefi" title="Yazılım Mühendisi'nin Şerefi"><i class="icon-chevron-right"></i></a>
            
        </p>
    </div>
</div>

<div class="row">
  <div class="span12">
    <hr style="margin: 30px 0 30px 0"/>

      Hayalini kurduğum framework için çıktığım yolda hergün yeni şeyler öğreniyorum. İtiraf etmem gerekiyorki ASP.NET mimarisinden çok etkilendim. Yazılım mimarileri ile uğraştığımdan dolayı sanırım C# diline ayrı bir sempatim var. Her açıdan çok iyi tasarlanmış bir dil. PHP'de web için biçilmiş kaftan fakat nesne yönelimli mimariler geliştirirken çok eksik olduğunu görüyoruz. Neden C# değilde PHP yazdığım sorusu aklınıza gelebilir. Bunun en büyük sebebi, C# projesinin Windows gibi baş ağrıtan kötü bir işletim sistemi üzerinde koşması geliyor. Mono ile daha önce bir web projesi geliştirmiş biri olarak yetersiz olduğunu söyleyebilirim.

Bu yazıda PHP6'da olması gerektiğini düşündüğüm özelliklerden söz edeceğim. Öncesinde küçük bir araştırma yaptım. Benim gibi PHP6 beklentileri olanlar var mı diye? <a href="http://www.stubbles.org/authors/1-Stephan-Schmidt">Stephan Schmidt</a>'in 6 parçadan oluşan <a href="http://www.stubbles.org/archives/5-My-wishlist-for-PHP-6,-pt1-The-object-type-hint.html">y</a><a href="http://www.stubbles.org/archives/7-My-wishlist-for-PHP-6,-pt2-Namespaces.html">a</a><a href="http://www.stubbles.org/archives/8-My-wishlist-for-PHP-6,-pt3-Annotations.html">z</a><a href="http://www.stubbles.org/archives/15-My-wishlist-for-PHP6,-pt4-static-initializers.html">ı</a><a href="http://www.stubbles.org/archives/19-My-wishlist-for-PHP6,-pt5-extphar.html">s</a><a href="http://www.stubbles.org/archives/24-My-wishlist-for-PHP6,-pt6-improvements-to-extreflection.html">ı</a> görmeliler.
<ol>
	<li>Namespaces</li>
	<li>Annountions</li>
	<li>Type Hint</li>
	<li>Reflection</li>
	<li>Delegate &amp; Event &amp; Lambda</li>
	<li>Function overloading</li>
	<li>Properties (Variable Get/Set)</li>
	<li>Extensions Methods &amp; Partial Class</li>
</ol>
<strong>1. Namespaces</strong>

Eğer bir framework yazıyorsanız birbirine benzeyen sınıf isimleri olması çok doğaldır. Bu durumlarda namespace'ler olması çok işe yarar. Neyse ki PHP 5.3'ten itibaren gelecek olan bir özellik. (Ref. <a href="http://marc.info/?l=php-internals&amp;m=118355320225178&amp;w=2">http://marc.info/?l=php-internals&amp;m=118355320225178&amp;w=2</a>)

<strong>2. Annountions</strong>

C#'ta buna Attribute denir. Amaç kod içine meta veriler sokmaktır. Ve bu verileri Reflection yöntemiyle dinamik olarak okuyarak işleme tabii tutmaktır.

Bir örnek ile açıklamak gerekirse, MVC yapısı kurduğumuzu düşünün. Her sınıfın bir sayfa her methodununda action/view işlemini yaptığını varsayalım. Action bazlı sayfa giriş yetkilendirmesine ihtiyacımız var. Bu sayfa eğer ödeme sayfası ise, sadece https olarak erişilmesi gerekiyor. Bunuda bir şekilde belirtmek gerekir. İşte bu gibi ihtiyaçları tanımlamak için annountions özelliğine ihtiyacımız var. Henüz resmi olarak desteklenmesede PHP genişletmeleriyle eklenebilir.
<pre class="prettyprint" style="padding-left: 30px;">@SimpleAnnotation
@SingleValuedAnnotation(true)
@SingleValuedAnnotation(-3.141592)
@SingleValuedAnnotation('Hello World!')
@SingleValuedAnnotationWithArray({1, 2, 3})
@MultiValuedAnnotation(key = 'value', anotherKey = false, andMore = 1234)</pre>
(Ref. <a href="http://code.google.com/p/addendum/">http://code.google.com/p/addendum/</a>)

<strong>3. Type Hint</strong>

Method parametreleri veya değişken tanımlarında, değişkenin tipini yazmak hem okunabilirliği arttırır. Hem de editörlerin kod tamamlama özelliğini daha sağlıklı yapılmasına imkan sağlar. Ayrıca hata yakalama işlemlerinde de büyük kolaylık sunar.

<strong>4. Reflection</strong>

Reflection dinamik olarak kod içerisinde gezinebilmeyi, kodu kısmen değiştirebilmeyi sağlar. Mesela; MVC'deki authentication işlemlerini sayfa sınıfının protected olan methodları için yap diyebiliriz.
<pre class="prettyprint" style="padding-left: 30px;">self::set_module_name($class_name);
self::set_action_name($method);

eval("\$class = new $class_name();");
$reflect = new ReflectionMethod($class_name, $method);
if ($reflect-&gt;isProtected()) {
$class-&gt;authentication();
}
call_user_method_array($method, $class, $method_arguments);</pre>
Ayrıca reflectionlar sayesinde <a href="http://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a> diye adlandırılan mimariler yaratabiliriz. Dependency Injection, Bir kod parçasına dışarıdan müdahale etmek demektir. Örneğin bir scheduler uygulaması yazacaksınız. Bu schedulera "şu sınıfın şu methodunu" çalıştır demek için kullanabilirsiniz.

(Ref. <a href="http://tr2.php.net/reflection">http://tr2.php.net/reflection</a>)

<strong>5. Delegate &amp; Event &amp; Lambda</strong>

Delegate kavramı C# ile beraber hayatımıza girmiştir.  Aslında C programcılarının bildiği gibi delegate'ler, fonksiyon göstericileridir. C# gibi dillerde sınıflar arasında global kavramı olmadığı için bir sınıftan diğerine mesaj yaptırmak  gerekebiliyor bazı durumlarda. İtiraf etmem gerekir ki bu bizi event mimarilerine ve lambda operatörüne götürür.  Delegate kullanımı C'deki prototip tanımlanması gibidir.
<p style="padding-left: 30px;">public delegate function int myDelegate(int $x);</p>

Bu şu anlama gelir. Geri dönüş değeri int olan ve parametresi int olan fonksiyonu işaret et. Görüldüğü üzere bu tanım bize başka bir ihtiyaç daha doğurur. <strong>type hint</strong> ve <strong>method signs </strong>kavramları. Dinamik bir dilde bu kadar tip güvenli kod rahatsız etmiş olabilir. C# dilinde bunun çözümü lambda operatörüdür.

Lambda, kısaca değişken olarak tanımlanabilen process blockları demektir. İstenilen yerde yaratılır ve öldürülür.

<strong>6. Function overloading</strong>

Fonksiyon yazarken farklı parametrelerle aynı method adıyla yazabilme  durumudur function overloading.  Bilindiği üzere PHP dilinde parametre sınırı yok. İstenildiği kadar parametre girilebilir. Bu parametrelerin dinamikliği sayesinde, aynı method ismi ile farklı parametrelerde <strong>func_get_arg</strong> alınabilir. Fakat okunabilirliği zorlaştıracak bir kod bloğu oluşmasına sebep olur. Bunu desteklerken bu dinamik yapının kaldırılmasını elbette istemeyiz.

Method overloading yapabilmek için methodların imzasını tutmak gerekir. Bu imza parametrelerin tipleri ve geri donus deger tipleri ile birlikte oluşturulur.
<p style="padding-left: 30px;"><strong>int function fonk(int $b);
int function fonk(int $b, string $c);</strong>

Yukarıdaki örnek PHP'de syntax hatasına sebep olur.

<strong>7. Properties (Variable Get / Set)</strong>

Properties kavramı C# dilinde kullanılan Cross-Cutting yada Aspect oriented denilen bir teknolojidir. Amacı sınıf değişkenlerinin aldığı değerlerin arasına girmenin bir yolunu bulmaktır. Özellikle get ve set işlemlerinin arasına girmek türetilen sınıflarda overloading yöntemi ile farklı bir şekilde değer atanmasını veya değer kontrolunun yapılması burada sağlanabilir.<strong> </strong>
<p style="padding-left: 30px;"><strong>private</strong> $_item;
<strong>public property</strong> $Item
{
<strong>get</strong> { return $this-&gt;_item; }
<strong>set </strong>{ $this-&gt;_item = <strong>value</strong>; }
}

$this-&gt;Item = 4;

Yukarıdaki kod blogu gibi olmasada <a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a> yontemiyle dolaylı olarak yapabilmek mümkün. Bunun için <a href="http://phpaspect.org">PHP Aspect</a>'ten faydalanılabilir. <cite><strong>
</strong></cite>

<strong>8. Extensions Methods &amp; Partial Classes
</strong>

Aslında bu iki özellik betik(script) olan bir dilde ne gerek var diye düşünebilirsiniz. Bu iki özellikte özellikle projelere dahil olan 3. parti yazılımların bakımını yaparken çok işimize yarar. Genellikle 3. parti yazılımları projenin içine dahil ederken ufak değişiklikler yapar ve projeyi bir bakıma çatallamış (fork) etmiş oluruz. Yeni versiyon geçişlerinde ise sıkıntı yaşarız. Bunu engellemek için başka bir yerde bu 3. parti yazılımların sınıflarını genişletebilsek (partial class) veya methodlarını aşırı yükleye bilsek (extensions methods) hayat daha güzel bir hale gelebilir. Peki bunu nasıl yaparız?

<strong>extend</strong> function <strong>string::</strong>is_null(<strong>string</strong> $value) { return ($value == null);  }

Yukarıdaki şekilde tanımlanabilir. string nesnesi için is_null adında bir method eklenmiş olur. Ve aşağıdaki şekilde çalıştırılabilir.

string $a = "merhaba";

if ($a::<strong>is_null</strong>()) { // biseyler yap }

Partial class yapısı ise, bir sınıfı içeriğini bir parçasını aynı isimde başka bir sınıfı tanımı yaratarak onun içine atamak demektir. Bakıldığında partial class ile extensions methods'ların bir farkı olmayabilir. C# kendi tasarımlarında partial classlar aynı assembly (paket) içerisinde olmasını ön koşul olarak koşar. Fakat bu durum extensions method mimarisinde zorunlu değildir.

Elbette bu iki özellik birleştirilerek daha iyi tasarlanabilir.

Benim PHP'nin yeni versiyonundan beklediklerim aklıma geldiği kadarıyla bu şekilde. Aslında bunların bir kısmı PHPv6 ya alındı. Bir kısmı ise bekliyor. Daha detaylı bilgiye, Derick Rethans'ın <a href="http://www.php.net/~derick/meeting-notes.html">toplantı notları</a>nda bulabilirsiniz. Bu konu ilginizi çektiyse, toplantı notlarının yapılacak listesine ve hangilerinin yapıldığına  <a href="http://wiki.pooteeweet.org/PhP60">buradan</a> erişebilirsiniz.

Benim aklıma gelenler şimdilik bunlar. Programlama dillerine ve Nesneye Yönelimli PHP'ye yönelik yazılarımı öğrendikçe burada paylaşmaya devam edeceğim...


      <!--
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/blog/2008/11/30/web-uygulama-gelistiricileri-icin-firefox-eklentileri" title="Web Geliştiricileri İçin Firefox Eklentileri">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/blog/2009/03/01/yazilim-gelistiricisinin-serefi" title="Yazılım Mühendisi'nin Şerefi">Next &rarr;</a></li>
      
      </ul>
    </div>-->
    <p>&nbsp;</p>
    
  </div>
  
</div>


        </div>
    </div>
</div>
<!-- /container -->


<footer class="footer">
    <div class="container">
        <p class="pull-right"> | <a href="#">Başa Dön</a> | </p>

        <p>
            &copy; 2007 - 2013 Hasan Ozgan<br/>
            <small>En son güncellenme tarihi: Kasım 04, 2013</small>
        </p>

    </div>
</footer>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="/assets/themes/heves/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/assets/themes/heves/js/jquery.followbox.min.js" type="text/javascript"></script>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1491715-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>

